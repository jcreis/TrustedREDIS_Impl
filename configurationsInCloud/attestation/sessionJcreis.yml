version: 0.3
name: jreisScone
predecessor: 882689f40cd1502b641b31958eb3e4bfeb564663c4b38703409f42f711822c5b
services:
   - name: proxy
     mrenclaves: [2d0a8555df60d260819862887c2aead6c0380e82e40ec49f5a254d33185ef8d7] # MRENCLAVE = Enclave hash: from execution with SCONE_VERSION=1
     command: "java -jar /home/project/proxyTRedis-1.0-SNAPSHOT.jar"
     image_name: proxyServerKeyStore_image
     pwd: /home/project/
     environment:
       LD_LIBRARY_PATH: "/usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64:/usr/lib/jvm/java-1.8-openjdk/jre/../lib/amd64"
       JAVA_TOOL_OPTIONS: "-Xmx256m"
       TMP_SECRET_VAR: "This is a protected secret distributed by Scone CAS!"
  
   - name: redis
     mrenclaves: [3f33b7dd2f6997a9547b9cc2983502a3853802d5b52838d8b47226ed7173a15d] # MRENCLAVE = Enclave hash: from execution with SCONE_VERSION=1
     command: "redis-server /usr/local/etc/redis/redis.conf"
     image_name: redis_image
     pwd: /usr/local/etc/redis/
     environment:
       LD_LIBRARY_PATH: "/usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64:/usr/lib/jvm/java-1.8-openjdk/jre/../lib/amd64"
       JAVA_TOOL_OPTIONS: "-Xmx256m"
       TMP_SECRET_VAR: "This is a protected secret distributed by Scone CAS!"


secrets:
   - name: proxyServerKeyStore_secret
     kind: binary
     value: 30820a1d020103308209d606092a864886f70d010701a08209c7048209c3308209bf3082057306092a864886f70d010701a0820564048205603082055c30820558060b2a864886f70d010c0a0102a08204fb308204f73029060a2a864886f70d010c0103301b04144f4899e0c9585f42d44d3cb988b21bc80220209f020300c350048204c8aec503f59795e285649ce7e0ac12a33ea7d64d20794e9bdd6a253b1d744c69493fa8c7cdf7885b863840430c3d851ee4eb919dfbcb3d429b2ab7746111020f8ee8c3afa8c906719e8312503a5fb8acaecbe424178ce6fbcfb0d2d5548380c1dd8b9095388143cae86a9aaad08038a626ee88d1718dc82fbe890169a5a567928bf319776d429abf65445d09e8891805f9c4e070c12394ae622249b8dacf88631071b1173060ef9c987ed2b8d7ac0e821aaf401e5af48a8d7b6a753a3f0d7f948c27a900d9e15200729605faace9f82029b73481891bf796471eaab30ceedf9bf299f9158c77dd468f2f950fe3a3b44ab27f05a541a93268955a32bf1abbab19bfebcc91b04ec673927ed1135354bb77c5f0c4f070ca38075baeda59fdfbe9bfa6e6333f911515e8622876d3656464280bfc8538e954631b84298d1a75f79f66b12f5e987d50617ba206f8b7bca71dc1f995beeeb7e8f0d603f42aa073ca1c8a226358e4aed44e0f572126da76e92efd62d529ba2c76f0b2188cf75cca8054984bc6881aeacc601afba5fb3cb8ba54329cfa20444ef638a7ea0e1ae4c26defb31deac5a23800530b23a74dce416be457cee57dc101816d5735c3d374cc5954f595bacda8751ad08663c322c50285242b2fd7961f85cd0d2a6ba12cd2440bd00e1b0d8bd36dc917dcc2302b05b399c0ce1077cbd6c4541f2c5c3c452e6078fe47a0ce19278dd9a3c3bfb959bd06fe47f624883b02ed58cb559a77f15dee673ffeef4a841c00621c5f00ce9538dd201fae9528acabffa8ce4bc7c5b555670c972be0208df2f2971d8b1c6d72931b8b76231dc99395e6a813e8bab6978019ff24a1746434d01fd5c3f18cbe09d69e492cef5f5005cddacde60cd5b2851670d79a1aec8e3ea2f7e6b7f0c6eb09fa818b8db2d47ae9be5c750136ee171bed2a3a512b2f8d064a2f4ffabe4a83707b6dcb91f1b6ad3e37abc8f55f5d4eebfee2246815e9a1763dcd1d5c15627d018ece2a2b2af3c319858bb17aa19bb84c1b8416d9831279482b3e946a20fd4ef09fe0194ef85f2388672f9113036ae6abdaeb6e5f38c21bc41427b32a53b8797a94fe1aa0e80c9e34670d39e97df942ba5652f864e5e97c28c2d8e9b30edfe0ae833b68816b3aec87c516c11133946a95a7522e4c24b3f2d7e0ce1c1bfd2c8cc57f2252fe73024637a7f6de6c954a64e80b97873ddf6bc845d9c44ea90f9d919498f656843ba0a5b0a642796d07d44d16c5d8be867a782d242194422a0e822f7408d02c689fcd220c3baaa4debf032b14d330ddc9aa91d914832900028ffe2260ab88734a3259629dc8c83452395323e96a621799bef71e89861a0d44e2912f03ccb1948ec1cd65400c3d22ebf6faa6785e9cdbc286deeaa6bcfd35311af75fea0755230a1f762d375f40bb34ae7a6045b5ec2decb547d52d47963032f39a397c2a1d02e299ebaf698dbf279e5b130ec4f50460ac0ba56aa9a6b8f43dd4fd4479d8fd73e37fc0e0faff54bb7c88649cdb6f1a21620b261b99c71d2fded6eeb76cc76d21f9e9974010aac4ac2572ae51232b6f98b4167c06bff49ac76ed83791eefa9f57409c3951b879b68655ea9b4e5d611c8f2dd75d617ca93685958f98c104ee8f6d10ba37b502270ee66939e2825d662ff023a1664d935fa06b54e37266877167b6078affb7769a0bcd955874b3217abfb93b15d2ded41dec333851aa314a302506092a864886f70d01091431181e1600700072006f00780079007300650072007600650072302106092a864886f70d0109153114041254696d6520313539333634303133363738363082044406092a864886f70d010706a0820435308204310201003082042a06092a864886f70d0107013029060a2a864886f70d010c0106301b0414defc65b05323e896108115e775cbabed54793984020300c350808203f05afb993ebc3bcdc29399c8eac65b8502eadcdc692cb6aa17aa5ca62782a417387f2721765a726184c669198367f707c1d7cc6454785a9e546020aebdca6606a1f9836932f855bbb0060724f9095f2a9c7c02dc5380a0bb19efabbcbca25d821e2d64b5b6993fb46aee5401937c2183bf24f365e8008a2cd4e7e82344b5c88580e97236c44b7a3a0bee19e7fc0476ef9c2b6626b1aef0c019cb0493dbaec01549eae9da31f23408701766c9532c140f6a3ce6738754475465bf9a922f2b3e0307b7a23d9c9a00b3e63c7ebc1aa41914e506c87254b926dde6d8afa1a2aa95826c91d515f9a672a81c93e0bf67a7dcd3b77cb519fe72d4653f4a6a07ba66084625ff4cbbbc4022c7f7d639fd43c4bf5849663706c5019669dc37ee5792a825276a39698b705b422968684b18a729d4e2db47a95bc6835f9ffbe06352ed91c3bc8a971ad691a5327181dd3ce8e4317a69dca4e7d686738b299f341fee3656a7b84b2110bf82d97683e305bfd3fba53abe3b7768bcfceaf996a948702c3b4ec695762c4b5f4260d866254fcbf7f0a0e908b7f41136f1cc9b3554378dc1a437fd236931e9c6d05681e9346db587eb9d5d845e13a3fb69c32406c061a394e2a6a9fe87fef5c8e559f093ed5215b43f1abb31129637eb9fcd35392a65dc79c54a5e382d6455379c57b135c6185c375087fd84eeb0c09fee2e51b0b0eb54ee2bec7b9f3486d2429ba9f33b8d5da27c484205d8bd33c30c56f3526de91faca16c5d03e2bbca421ed7104a58ca3757031866860b81ae05b8d2f51842b7fe4cfe3ea76770ee5b4cf3379481d2435f77967d7deacb9d651c80e9ba3849ab0d68ba0c813cbab6cd395ff01c0f15ba9f12480f3830d32ed2c9fee3b50b572d900bdd62629ff4b017baa9846a2f57419f18c9081180f15952124c3a56aeea2868c73d1976f03ea624f5535c168557f708300be0dc9f48fb9a799b9c388ccde2ce8241db6052f9eede0735983ac0f4f803a98a739053db4790dbf7662c5d3a2d56cce597dd1d34345f54b6adf95ce96d5750c6b824ee66bb0a0d8e77202e5dd26a4fd80f726d627db44fa83288f0cd6687466542483930dc5ff543589894cf5629835ffccea20399de7f7794bae0885bf30215a901c4448b4e0b2ef28a7b9da09b8e3f9ad5edc43091d00c092dd1442ff10bdb37989100b3307bb6294f0f7b7584663cf066fc1029b98e9c632b70b98e923a1764ec0f7aac795d4224262bca9b2a79271ba8ee43b8b531e6da637bb8cf476fd8cd5a93c7f41ce6b105ccfece04d8e58228d18673434f11ee69fbd064c22d51e38a6d4ef1965b9fd1dced127e9bf76ece896255faa670d6592c78f93abaed03062e69758e83aec94e6501900b38676d0c96e335eaa6cbab35fc868d57c6ad8fc51ac1ea9140303e3021300906052b0e03021a0500041482c2fe79bacd7c71941ef6a49e79618fdfddf6a50414b09c3e18ad474585bddb51d31265aa1d26ab251302030186a0

   - name: redisKey_secret
     kind: private-key
     value: |
       -----BEGIN PRIVATE KEY-----
       MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQChKwXlHakFpXPK
       UwBQIy6wBxWf+TU7kj//swhCcRfjaKMxPAd6UcDm5+71QinvFwJxLMeEheqjjbG0
       GeDxaMNGFmG1geb138qMn7iqrsBYpNupWWF2T7bf/0gSJHSaAPnySYOobBe8Nbmp
       H71ATX9K5CPQs2IET06hkOgj7EyvUuaiLIANqZjpUAy3L3K5vV+SGmFvLzJdXkav
       gPipb+6Hc76d9W8ic0v9V/fx83+iGhpdyQFYT/y7VGnZw8lfkxbUiMNBD86yHQvD
       yyVKFLpG8GJYvk9NvOabHSRdxZhSVyv+BHQKYZdEkbvu7GqKUgVNS5A/p0JiZJnR
       fxCzepfdAgMBAAECggEAEcjtnZroS/c2D92Y6z72p/YgLMcTWL+K0GyxPKO+PxoM
       6CH3sUfUQabWd7oVZozjeBm46qbcfa/lLDqu1/T3l4Rgw+bR1dAcSehWOH+QOjf3
       BXkXiDbDt3Q0P8xGEbiJ3HLAVJWZCOvk0QTvnWjv4xPJ3/3rkw4tXybedxhcXfxb
       H5DN+XwEYG6v21t5f0n9LoYEn2MbfExKvA+08b5FlTfMkmsRYaB5Gf7ekeTSjOol
       FbaWYUwaM5kNwR7JfYlB+A+F5Gg66eWGsJP8U6BW6uCuOwo9N55wBQClR1gSElju
       MATgxh0VKA8CT0gvBX1IbfDbhH88xc7hWcA84/DYAQKBgQDP1UZ+QV4iuLJwAmM0
       8Rua19+WV0/j/7df/jCqO6XEi+ca3KmKog/Y3NK8dN0O0b6u9RGkmXbzrXn4OB6A
       Xu0AM5Drig251d0tJm5igSJeqDZq70TfzyNPyicmFhQy8ZzA7rkwTqu1YdHrTg3l
       oC6Ck6qjuP3WO9px08l1tG3vGQKBgQDGhR0IOvMu8+fL7Qir2F3txXGeuZS5/1vk
       Iabs9ivjEAgLmxRA7+Xm3NcNleNPViNHKpGNvaCOuns+3TyyelJIbD4lKy5IUywG
       nGsHnONCTXdg6JuxILxvDGgJUx09XPDFXMdFnBHNUHpZwDbu6JIG29k57e1XlSLS
       utJBXJS7ZQKBgEM3q1DyO0vniG6JlyRsRo1R/FJXctM+xUQapgqot/hVdy1M6NiZ
       iZ6N7OpesZA1bgKP6GDf8YTmOmh5XgQOr4A9LUXApKfR73LG1zSspz0OEmuLby8j
       gzwvGXJL+cRwOE595w8kooxLUuVTnVMC94fr0miZUB+VxBTEdofHDzchAoGBAKtb
       l5XVHLi4vKrgLg33tAxb1BmIY4Kxk6Y2DhqY24Uh/2/VKwRqj25Zzh/h89Y1qjnx
       2rYYqxDIkz3ORmhhAcmV9Yar4UV41ZXXSuPFXr2KlLNH1axtb3oDoYH7BlBDe2lB
       DpldgFhTUWlLa5+JjRLyjm1cnPRuvSJdNMRKn++pAoGAKAmwmcvlogIu80BI/yYE
       9EBgXpwpJ6ECqEx9v4xRg3zRmKRfmk26NRM8esP1PFzHUnk9zXwLuj3/cckTnjI7
       lM8ut0GT91zYO+5QY1/kIC5vzid5gPxBWmUP3uyLCF9LYdDDvFKLN/IZuZoFo2X6
       avGaxWcgx2I3QdkHFQFxr7U=
       -----END PRIVATE KEY-----


   - name: redisCrt_secret
     kind: x509
     private_key: redisKey_secret
     value: |
       -----BEGIN CERTIFICATE-----
       MIIEfTCCAmWgAwIBAgIUQTo/7CcBcJIxBCjSCzEoCY5n4O0wDQYJKoZIhvcNAQEL
       BQAwNTETMBEGA1UECgwKUmVkaXMgVGVzdDEeMBwGA1UEAwwVQ2VydGlmaWNhdGUg
       QXV0aG9yaXR5MB4XDTIwMTEyMDIyMjQyOFoXDTIxMTEyMDIyMjQyOFowgZgxCzAJ
       BgNVBAYTAlBUMREwDwYDVQQIDAhQb3J0dWdhbDEPMA0GA1UEBwwGTGlzYm9uMRUw
       EwYDVQQKDAxSZWRpcyBTZXJ2ZXIxJjAkBgkqhkiG9w0BCQEWF2pjcmVpczk2c3R1
       ZmZAZ21haWwuY29tMSYwJAYDVQQDDB1yZWRpcy1zZXJ2ZXIuam9hb3JlaXNwYy5s
       b2NhbDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKErBeUdqQWlc8pT
       AFAjLrAHFZ/5NTuSP/+zCEJxF+NoozE8B3pRwObn7vVCKe8XAnEsx4SF6qONsbQZ
       4PFow0YWYbWB5vXfyoyfuKquwFik26lZYXZPtt//SBIkdJoA+fJJg6hsF7w1uakf
       vUBNf0rkI9CzYgRPTqGQ6CPsTK9S5qIsgA2pmOlQDLcvcrm9X5IaYW8vMl1eRq+A
       +Klv7odzvp31byJzS/1X9/Hzf6IaGl3JAVhP/LtUadnDyV+TFtSIw0EPzrIdC8PL
       JUoUukbwYli+T0285psdJF3FmFJXK/4EdAphl0SRu+7saopSBU1LkD+nQmJkmdF/
       ELN6l90CAwEAAaMhMB8wHQYDVR0RBBYwFIISKi5qb2FvcmVpc3BjLmxvY2FsMA0G
       CSqGSIb3DQEBCwUAA4ICAQCM3etYIthkj6pAdSPDvR2voimepNZ/Bj5UAVnIFmtd
       EGcQgqG343xbYbCN3cJrzJ5cg6I2HQRC8SW9TfahrPFLwSEFMYlC8J8bb7gRcthd
       evw09ppRg8jl7ziP8eFEQiB5BXohDk87cx+lUjyN1nP3oeJey2JjHeHQRKFbicvF
       6sHHlhIwbtHgeSOmqO/EBA/dNM7fmCMZF1XtLkzxbpR3jCXx86gzqhYYeBfRW/P/
       SQkeWVlONee1VISQIzE/3QvmaPEONouKqMpb6yh58ChZ3Xjrh34iFYFbey2egjEl
       OR54YNrGRYBHRwtLP221hIKmW5XAfUTVyebZy9zju/jqaR2cGvaimmQetSdhZ+EA
       aRARBCFodHOv1QvYB87YxKv/gKcK8BwGAhCmUe+FkHmEU/tkev4Mtqqqu0H/84uu
       gj1o/1k+Kx/h7klfIw80cVKUQEuD8mpyRklNX5bUuYwAGLcsruhdnPx9TpLe6Fyg
       Af3widuPUYdJVirtG3l3BFLTDjaAf9xvwwDE0p8Us2CrBQ1L1D0PQU0emhVOxmL4
       X4gVh7BxaDOBE548jicxAH+Kgt8SyzNg1LdmxCGdhp9RWkFwmbBiz7/qLECCCENX
       FZ4Uz7/ztJs4n54OKgLaQf8whx9PgluDB3QhJr8MRn7JFAwJnlLKRbFLayIiu0Ki
       eQ==
       -----END CERTIFICATE-----

       
images:
   - name: proxyServerKeyStore_image
     injection_files:
      - path: /home/project/proxySSL/proxyServerKeyStore.p12
        content: |
          $$SCONE::proxyServerKeyStore_secret$$

   - name: redis_image
     injection_files:
      - path: /usr/local/etc/redis/redis.key
        content: |
          $$SCONE::redisCrt_secret.key$$
      
      - path: /usr/local/etc/redis/redis.crt
        content: |
          $$SCONE::redisCrt_secret.crt$$    
   

security:
  attestation:
    tolerate: [debug-mode, outdated-tcb]
    ignore_advisories: ["INTEL-SA-00220", "INTEL-SA-00270", "INTEL-SA-00293", "INTEL-SA-00320", "INTEL-SA-00329"]       
